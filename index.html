<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body, html { margin: 0; padding: 0; font-family: Arial, sans-serif; background: #f4f4f4; }
  header { background: #003580; color: #fff; padding: 20px; text-align: center; }
  header h1 { margin: 0; font-size: 1.8em; }
  .search-section { background: #fff; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.2); display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
  .search-section label { display: block; font-weight: bold; margin-bottom: 5px; }
  .search-section input, .search-section select { width: 100%; padding: 8px; box-sizing: border-box; }
  .search-section div { flex: 1 1 200px; min-width: 200px; }
  .search-section button { background: #0071c2; color: #fff; border: none; padding: 12px 20px; cursor: pointer; margin-top: 22px; width: 100%; }
  .search-section button:hover { background: #005999; }
  .wrapper { max-width: 1200px; margin: 0 auto; padding: 20px; }
  .section-header { margin: 40px 0 20px; font-size: 1.4em; font-weight: bold; border-bottom: 2px solid #ccc; padding-bottom: 5px; }
  .hotels-list { display: flex; flex-wrap: wrap; gap: 20px; }
  .hotel-card { background: #fff; border-radius: 4px; overflow: hidden; flex: 1 1 calc(33% - 40px); min-width: 280px; box-shadow: 0 1px 4px rgba(0,0,0,0.2); display: flex; flex-direction: column; }
  .hotel-card img { width: 100%; height: 180px; object-fit: cover; }
  .hotel-info { padding: 10px; flex: 1; display: flex; flex-direction: column; }
  .hotel-info h3 { margin: 0 0 10px; font-size: 1.1em; }
  .hotel-info p { margin: 0 0 10px; flex: 1; }
  .price { font-weight: bold; margin-bottom: 10px; }
  .hotel-info .rating { margin-bottom: 10px; color: #f39c12; }
  .hotel-info button { background: #0071c2; color: #fff; border: none; padding: 10px; cursor: pointer; text-align: center; }
  .hotel-info button:hover { background: #005999; }
  #bookingsModal, #paymentModal { position: fixed; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; }
  .modal-content { background: #fff; width: 320px; padding: 20px; border-radius: 4px; position: relative; }
  .modal-content h2 { margin-top: 0; }
  .modal-content label { display: block; margin: 10px 0 5px; }
  .modal-content input { width: 100%; padding: 8px; margin-bottom: 10px; }
  .modal-content button { background: #0071c2; color: #fff; border: none; padding: 10px; width: 100%; cursor: pointer; }
  .modal-content button:hover { background: #005999; }
  .close-btn { position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 1.2em; cursor: pointer; }
  .my-bookings { background: #fff; box-shadow: 0 1px 4px rgba(0,0,0,0.2); padding: 20px; }
  .my-bookings table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  .my-bookings th, .my-bookings td { text-align: left; padding: 10px; border-bottom: 1px solid #ccc; }
  .my-bookings th { background: #f0f0f0; }
  .my-bookings button { background: #c0392b; color: #fff; border: none; padding: 5px 10px; cursor: pointer; margin-right: 5px; }
  .my-bookings button:hover { background: #a22e1d; }
  @media(max-width: 768px) { .hotel-card { flex: 1 1 100%; } .search-section { flex-direction: column; gap: 0; } }
  /* ...existing code... */
.room-images-column {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 10px;
  align-items: center;
}
.room-images-column img {
  width: 90%;
  max-width: 400px;
  height: 160px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  transition: transform 0.2s;
}
.room-images-column img:hover {
  transform: scale(1.04);
  box-shadow: 0 4px 16px rgba(0,0,0,0.22);
}
.hotel-card-btns {
  display: flex;
  gap: 18px;
  margin-top: 10px;
  justify-content: center;
}
/* ...existing code... */
</style>
</head>
<body>

<header>
  <h1>Mock Hotels</h1>
  <a href="login.html" style="position:absolute;top:30px;right:30px;background:#0071c2;color:#fff;padding:8px 16px;border-radius:4px;text-decoration:none;">Logout</a>
</header>

<div class="search-section">
  <div>
    <label for="locationInput">Where to?</label>
    <input type="text" id="locationInput" placeholder="City or Destination" />
  </div>
  <div>
    <label for="checkInInput">Check-in</label>
    <input type="date" id="checkInInput" />
  </div>
  <div>
    <label for="checkOutInput">Check-out</label>
    <input type="date" id="checkOutInput" />
    <!-- Add this script just before your main script or inside your <script> tag -->

<script>
// Set minimum check-in date to today
const checkInInput = document.getElementById('checkInInput');
const checkOutInput = document.getElementById('checkOutInput');

function setTodayAsMinCheckIn() {
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth() + 1).padStart(2, '0');
  const dd = String(today.getDate()).padStart(2, '0');
  const minDate = `${yyyy}-${mm}-${dd}`;
  checkInInput.min = minDate;
  checkInInput.value = minDate;
  setMinCheckOut();
}

function setMinCheckOut() {
  const checkInDate = new Date(checkInInput.value);
  checkInDate.setDate(checkInDate.getDate() + 1); // Minimum checkout is next day
  const yyyy = checkInDate.getFullYear();
  const mm = String(checkInDate.getMonth() + 1).padStart(2, '0');
  const dd = String(checkInDate.getDate()).padStart(2, '0');
  const minCheckOut = `${yyyy}-${mm}-${dd}`;
  checkOutInput.min = minCheckOut;
  if (!checkOutInput.value || checkOutInput.value < minCheckOut) {
    checkOutInput.value = minCheckOut;
  }
}

setTodayAsMinCheckIn();
checkInInput.addEventListener('change', setMinCheckOut);
</script>
  </div>
  <div>
    <label for="guestsInput">Guests</label>
    <select id="guestsInput">
      <option value="1">1 guest</option>
      <option value="2" selected>2 guests</option>
      <option value="3">3 guests</option>
      <option value="4">4 guests</option>
    </select>
  </div>
  <div>
    <label for="sortInput">Sort By</label>
    <select id="sortInput">
      <option value="price-asc">Price: Low to High</option>
      <option value="price-desc">Price: High to Low</option>
      <option value="rating-desc">Rating: High to Low</option>
      <option value="location-asc">Location: A to Z</option>
    </select>
  </div>
  <div>
    <button id="searchBtn">Search</button>
  </div>
</div>

<div class="wrapper">
  <div class="section-header">Available Hotels</div>
  <div class="hotels-list" id="hotelsList"></div>

  <div class="section-header">My Bookings</div>
  <div class="my-bookings">
    <table>
      <thead>
        <tr>
          <th>Hotel</th><th>Location</th><th>Check-in</th><th>Check-out</th><th>Nights</th><th>Guests</th><th>Name</th><th>Total Bill</th><th>Actions</th>
        </tr>
      </thead>
      <tbody id="bookingsBody"></tbody>
    </table>
  <button id="clearBookingsBtn">Clear All Bookings</button>
  </div>
</div>

<!-- Booking Modal -->
<!-- Booking Modal -->
<div id="bookingsModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeBookingModal()">×</button>
    <h2>Complete Booking</h2>
    <p>Hotel: <span id="modalHotelName"></span></p>
    <p>Location: <span id="modalHotelLocation"></span></p>
    <p>Nights: <span id="modalNights"></span></p>
    <p>Total Price: ₹<span id="modalTotal"></span></p> <!-- Changed $ to ₹ -->
    <label for="guestNameInput">Your Name</label>
    <input type="text" id="guestNameInput" placeholder="John Doe" />
    <label for="guestEmailInput">Your Email</label>
    <input type="email" id="guestEmailInput" placeholder="john@example.com" />
    <button id="confirmBookingBtn">Confirm Booking</button>
  </div>
</div>
<!-- Payment Modal -->
<div id="paymentModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closePaymentModal()">×</button>
    <h2>Payment</h2>
    <p>Pay for: <span id="paymentHotelName"></span></p>
    <p>Amount: $<span id="paymentAmount"></span></p>
    <label>Card Number</label>
    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" />
    <label>Expiry (MM/YY)</label>
    <input type="text" id="expiry" placeholder="MM/YY" />
    <label>CVV</label>
    <input type="text" id="cvv" placeholder="123" />
    <button id="payBtn">Pay Now</button>
  </div>
</div>

<!-- Room Details Modal -->
<!-- Room Details Modal -->
<!-- Room Details Modal -->
<div id="roomDetailsModal" style="display:none; position:fixed; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000;">
  <div class="modal-content" style="max-width:500px;">
    <button class="close-btn" onclick="closeRoomDetailsModal()">×</button>
    <h2 id="roomModalHotelName"></h2>
    <div id="roomImages" class="room-images-column"></div> <!-- Add class for column layout -->
    <p id="roomModalHotelLocation"></p>
    <p id="roomModalHotelType"></p>
    <p id="roomModalHotelRating"></p>
    <p id="roomModalHotelPrice"></p>
    <button id="roomBookBtn">Book This Room</button>
  </div>
</div>
<script>
// ...existing code...
const hotels = [
  { name:"HOTEL SWAGATH", location:"karkala", price:1500, rating:4.5, img:"images/hotelswag.jpg", roomImages:["images/rbed.jpg","images/rbal.jpg"], roomType: "Deluxe Room" },
  { name:"RATNA FOREVER", location:"karkala", price:2000, rating:4.2, img:"images/ratna_forevr.jpg", roomImages:["images/bed.jpg","images/bal.jpg"], roomType: "Suite" },
  { name:"KARKALA INN", location:"Karkala,Bypass", price:1750, rating:4.0, img:"images/karkala_inn.jpg", roomImages:["images/b.jpg","images/bd.jpg"], roomType: "Standard Room" },
  { name:"PARADISE LAGOON", location:"Udupi", price:2200, rating:3.8, img:"images/pardise_lagoon.jpg", roomImages:["images/p.jpg","images/pd.jpg"], roomType: "Lagoon View" },
  { name:"RADHA RESIDENCY", location:"Udupi", price:2500, rating:4.7, img:"images/radha_residency.jpg", roomImages:["images/r.jpg","images/rd.jpg"], roomType: "Executive Suite" },
  { name:"HOTEL ABHINAV", location:"Udupi", price:1800, rating:4.3, img:"images/abhinav.jpg", roomImages:["images/h.jpg","images/hd.jpg"], roomType: "Family Room" },
  { name:"NEW ROYAL", location:"Manglore", price:1300, rating:3.5, img:"images/royal.jpg", roomImages:["images/q.jpg","images/qd.jpg"], roomType: "Budget Room" },
  { name:"HOTEL SURYA", location:"Manglore", price:1300, rating:3.5, img:"images/surya.jpg", roomImages:["images/k.jpg","images/kd.jpg"], roomType: "Classic Room" },
  { name:"OCEAN BEACH HOTEL", location:"Manglore", price:3000, rating:4.8, img:"images/beach.jpg", roomImages:["images/s.jpg","images/sd.jpg"], roomType: "Beach Suite" }
];
// ...existing code...

const hotelsList = document.getElementById('hotelsList');
const bookingsBody = document.getElementById('bookingsBody');
const bookingsModal = document.getElementById('bookingsModal');
const modalHotelName = document.getElementById('modalHotelName');
const modalHotelLocation = document.getElementById('modalHotelLocation');
const modalNights = document.getElementById('modalNights');
const modalTotal = document.getElementById('modalTotal');
const guestNameInput = document.getElementById('guestNameInput');
const guestEmailInput = document.getElementById('guestEmailInput');
const confirmBookingBtn = document.getElementById('confirmBookingBtn');

const paymentModal = document.getElementById('paymentModal');
const paymentHotelName = document.getElementById('paymentHotelName');
const paymentAmount = document.getElementById('paymentAmount');
const payBtn = document.getElementById('payBtn');

let selectedHotel = null;
let bookings = JSON.parse(localStorage.getItem('bookings')) || [];
let payingBookingIndex = null;

// ...existing code...
function renderHotels(list){
  hotelsList.innerHTML = '';
  list.forEach((h,index)=>{
    const card = document.createElement('div');
    card.className = 'hotel-card';
    card.innerHTML = `
      <img src="${h.img}" alt="${h.name}" id="hotelImg${index}" style="cursor:pointer;">
      <div class="hotel-info">
        <h3>${h.name}</h3>
        <p>Rating: ${h.rating}/5</p>
        <p class="price">₹${h.price}/night</p>
         <div class="hotel-card-btns">
        <button id="viewBtn${index}">View</button>
        <button id="bookBtn${index}">Book</button>
      </div>
      </div>
    `;
    hotelsList.appendChild(card);
    document.getElementById(`viewBtn${index}`).addEventListener('click', ()=>{
      openRoomDetailsModal(h);
    });
    document.getElementById(`bookBtn${index}`).addEventListener('click', ()=>{
      startBooking(h);
    });
    // Optionally remove image click for modal:
    // document.getElementById(`hotelImg${index}`).addEventListener('click', ()=>{
    //   openRoomDetailsModal(h);
    // });
  });
}
 //...existing code...
function renderBookings(){
  bookingsBody.innerHTML='';
  bookings.forEach((b,index)=>{
    const tr = document.createElement('tr');
    tr.innerHTML=`
      <td>${b.name}</td>
      <td>${b.location}</td>
      <td>${b.checkIn}</td>
      <td>${b.checkOut}</td>
      <td>${b.nights}</td>
      <td>${b.guests}</td>
      <td>${b.guestName}</td>
      <td>$${b.total}</td>
      <td>
        ${b.paid ? '<span style="color:green;">Paid</span>' : `<button onclick="payBooking(${index})">Pay Now</button>`}
        <button onclick="removeBooking(${index})">Remove</button>
      </td>
    `;
    bookingsBody.appendChild(tr);
  });
}

function openRoomDetailsModal(hotel) {
  document.getElementById('roomModalHotelName').textContent = hotel.name;
  document.getElementById('roomModalHotelLocation').textContent = "Location: " + hotel.location;
  document.getElementById('roomModalHotelType').textContent = "Room Type: " + (hotel.roomType || "Standard Room");
  document.getElementById('roomModalHotelRating').textContent = "Rating: " + (hotel.rating ? hotel.rating + "/5" : "N/A");
  document.getElementById('roomModalHotelPrice').textContent = "Price: ₹" + hotel.price + "/night";
  const roomImagesDiv = document.getElementById('roomImages');
  roomImagesDiv.innerHTML = '';
  (hotel.roomImages || [hotel.img]).forEach(src => {
    const img = document.createElement('img');
    img.src = src;
    img.alt = hotel.name;
    img.style.width = "120px";
    img.style.height = "80px";
    img.style.objectFit = "cover";
    roomImagesDiv.appendChild(img);
  });
  document.getElementById('roomDetailsModal').style.display = 'flex';

  document.getElementById('roomBookBtn').onclick = function() {
    closeRoomDetailsModal();
    startBooking(hotel);
  };
}

function closeRoomDetailsModal() {
  document.getElementById('roomDetailsModal').style.display = 'none';
}        

function startBooking(hotel){
  const checkIn = document.getElementById('checkInInput').value;
  const checkOut = document.getElementById('checkOutInput').value;
  const guests = document.getElementById('guestsInput').value;
  if(!checkIn || !checkOut){ alert("Please select check-in and check-out dates."); return; }
  if(new Date(checkOut) <= new Date(checkIn)){ alert("Check-out must be after check-in."); return; }
  const nights = Math.ceil((new Date(checkOut)-new Date(checkIn))/(1000*60*60*24));
  const total = nights*hotel.price;
  selectedHotel={...hotel, checkIn, checkOut, guests, nights, total};
  modalHotelName.textContent=hotel.name;
  modalHotelLocation.textContent=hotel.location;
  modalNights.textContent=nights;
  modalTotal.textContent=total;
  bookingsModal.style.display='flex';
}

function closeBookingModal(){ bookingsModal.style.display='none'; guestNameInput.value=''; guestEmailInput.value=''; }
function closePaymentModal(){ paymentModal.style.display='none'; document.getElementById('cardNumber').value=''; document.getElementById('expiry').value=''; document.getElementById('cvv').value=''; }

confirmBookingBtn.addEventListener('click',()=>{
  const guestName=guestNameInput.value.trim();
  const guestEmail=guestEmailInput.value.trim();
  if(!guestName || !guestEmail){ alert("Please fill name and a valid email."); return; }
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailRegex.test(guestEmail)){ alert("Enter a valid email."); return; }
  bookings.push({...selectedHotel, guestName, guestEmail, paid:false});
  localStorage.setItem('bookings',JSON.stringify(bookings));
  renderBookings();
  closeBookingModal();
  alert("Booking confirmed!");
});

function payBooking(index){
  payingBookingIndex=index;
  const b=bookings[index];
  paymentHotelName.textContent=b.name;
  paymentAmount.textContent=b.total;
  paymentModal.style.display='flex';
}

payBtn.addEventListener('click',()=>{
  const card=document.getElementById('cardNumber').value.trim();
  const exp=document.getElementById('expiry').value.trim();
  const cvv=document.getElementById('cvv').value.trim();
  if(!card || !exp || !cvv){ alert("Please enter card details."); return; }
  bookings[payingBookingIndex].paid=true;
  localStorage.setItem('bookings',JSON.stringify(bookings));
  renderBookings();
  closePaymentModal();
  alert("Payment successful!");
});

//function removeBooking(index){ bookings.splice(index,1); localStorage.setItem('bookings',JSON.stringify(bookings)); renderBookings(); }

//document.getElementById('clearBookingsBtn').addEventListener('click',()=>{
 // if(confirm("Clear all bookings?")){ bookings=[]; localStorage.removeItem('bookings'); renderBookings(); }
//});

//function keepOnlyBooking(index) {
  //bookings = [bookings[index]];
  //localStorage.setItem('bookings', JSON.stringify(bookings));
  //renderBookings();
//}

function searchAndSort(){
  const locationVal=document.getElementById('locationInput').value.toLowerCase();
  const sortVal=document.getElementById('sortInput').value;
  let filtered=hotels.filter(h=>h.location.toLowerCase().includes(locationVal) || locationVal==="");
  if(locationVal && filtered.length === 0){
    alert("No hotels found for the entered location.");
  }
  switch(sortVal){
    case "price-asc": filtered.sort((a,b)=>a.price-b.price); break;
    case "price-desc": filtered.sort((a,b)=>b.price-a.price); break;
    case "rating-desc": filtered.sort((a,b)=>b.rating-a.rating); break;
    case "location-asc": filtered.sort((a,b)=>a.location.localeCompare(b.location)); break;
  }
  renderHotels(filtered);
}

document.getElementById('searchBtn').addEventListener('click',searchAndSort);
document.getElementById('sortInput').addEventListener('change',searchAndSort);

renderHotels(hotels);
renderBookings();
</script>

</body>
</html>

